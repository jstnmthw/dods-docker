version: '3.4'

services:
  dods-server:
    build:
      context: Docker/dods
      dockerfile: Dockerfile
    restart: unless-stopped
    container_name: dods-server
    environment:
      - CONFIG_GITHUB_USERNAME=${CONFIG_GITHUB_USERNAME}
      - CONFIG_GITHUB_TOKEN=${CONFIG_GITHUB_TOKEN}
      - CONFIG_GITHUB_REPO=${CONFIG_GITHUB_REPO}
      - CONFIG_GITHUB_BRANCH=${CONFIG_GITHUB_BRANCH}
    volumes:
      - .server:/data
      - ./cfg:/app/cfg
    ports:
      - "27015:27015/tcp"
      - "27015:27015/udp"
      - "27020:27020/udp"
      - "27005:27005/udp"
